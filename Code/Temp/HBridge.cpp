/*
____/\\\\\\\\\______________________/\\\__________/\\\__________/\\\\\\_________________________/\\\\\\\\\\\_______________________________________________________________        
 __/\\\///////\\\___________________\/\\\_________\/\\\_________\////\\\_______________________/\\\/////////\\\_____________________________________________________________       
  _\/\\\_____\/\\\___________________\/\\\_________\/\\\____________\/\\\______________________\//\\\______\///____________________________________________________/\\\______      
   _\/\\\\\\\\\\\/______/\\\____/\\\__\/\\\_________\/\\\____________\/\\\_________/\\\\\\\\_____\////\\\______________/\\\\\\\\______/\\\\\______/\\\____/\\\___/\\\\\\\\\\\_     
    _\/\\\//////\\\_____\/\\\___\/\\\__\/\\\\\\\\\___\/\\\\\\\\\______\/\\\_______/\\\/////\\\_______\////\\\_________/\\\//////_____/\\\///\\\___\/\\\___\/\\\__\////\\\////__    
     _\/\\\____\//\\\____\/\\\___\/\\\__\/\\\////\\\__\/\\\////\\\_____\/\\\______/\\\\\\\\\\\___________\////\\\_____/\\\___________/\\\__\//\\\__\/\\\___\/\\\_____\/\\\______   
      _\/\\\_____\//\\\___\/\\\___\/\\\__\/\\\__\/\\\__\/\\\__\/\\\_____\/\\\_____\//\\///////_____/\\\______\//\\\___\//\\\_________\//\\\__/\\\___\/\\\___\/\\\_____\/\\\_/\\__  
       _\/\\\______\//\\\__\//\\\\\\\\\___\/\\\\\\\\\___\/\\\\\\\\\____/\\\\\\\\\___\//\\\\\\\\\\__\///\\\\\\\\\\\/_____\///\\\\\\\\___\///\\\\\/____\//\\\\\\\\\______\//\\\\\___ 
        _\///________\///____\/////////____\/////////____\/////////____\/////////_____\//////////_____\///////////_________\////////______\/////_______\/////////________\/////____
*/ 

#include "HBridge.h"
#include <Arduino.h>


HBridge::HBridge(){}

void HBridge::begin(){
        pinMode(this->_DIR1, OUTPUT);
        pinMode(this->_DIR2, OUTPUT);
        ledcSetup(this->_LEDC_CHANNEL_3, this->_LEDC_BASE_FREQ, this->_LEDC_TIMER_8_BIT);
        ledcSetup(this->_LEDC_CHANNEL_4, this->_LEDC_BASE_FREQ, this->_LEDC_TIMER_8_BIT);
        ledcAttachPin(this->_PWM1, _LEDC_CHANNEL_3);
        ledcAttachPin(this->_PWM2, _LEDC_CHANNEL_4);
}

void HBridge::move(int speedLeft, int speedRight){
    if (speedRight < 0) {
        digitalWrite(this->_DIR1, HIGH);
    } 
    else {
        digitalWrite(this->_DIR1, LOW);
    }

    if (speedLeft < 0) {
        digitalWrite(this->_DIR2, HIGH);
    } 
    else {
        digitalWrite(_DIR2, LOW);
    }

    ledcWrite(this->_LEDC_CHANNEL_3, abs(speedRight));
    ledcWrite(this->_LEDC_CHANNEL_4, abs(speedLeft));
}
